(self["webpackChunkaw_webui"]=self["webpackChunkaw_webui"]||[]).push([[3834],{10854:(e,t,r)=>{var a=r(79920),n=a("sortBy",r(33031));n.placeholder=r(2874),e.exports=n},11333:(e,t,r)=>{var a=r(79920),n=a("reverse",r(77126));n.placeholder=r(2874),e.exports=n},15497:(e,t,r)=>{var a=r(79920),n=a("filter",r(87612));n.placeholder=r(2874),e.exports=n},20426:e=>{var t=Object.prototype,r=t.hasOwnProperty;function a(e,t){return null!=e&&r.call(e,t)}e.exports=a},31126:(e,t,r)=>{var a=r(15389),n=r(40102);function i(e,t){return e&&e.length?n(e,a(t,2)):0}e.exports=i},33031:(e,t,r)=>{var a=r(83120),n=r(46155),i=r(69302),o=r(36800),s=i((function(e,t){if(null==e)return[];var r=t.length;return r>1&&o(e,t[0],t[1])?t=[]:r>2&&o(t[0],t[1],t[2])&&(t=[t[0]]),n(e,a(t,1),[])}));e.exports=s},33653:(e,t,r)=>{var a=r(79920),n=a("values",r(35880),r(96493));n.placeholder=r(2874),e.exports=n},40102:e=>{function t(e,t){var r,a=-1,n=e.length;while(++a<n){var i=t(e[a]);void 0!==i&&(r=void 0===r?i:r+i)}return r}e.exports=t},42093:(e,t,r)=>{var a=r(79920),n=a("groupBy",r(94394));n.placeholder=r(2874),e.exports=n},47248:(e,t,r)=>{var a=r(16547),n=r(51234);function i(e,t){return n(e||[],t||[],a)}e.exports=i},50014:(e,t,r)=>{var a=r(15389),n=r(55765);function i(e,t){return e&&e.length?n(e,a(t,2)):[]}e.exports=i},51234:e=>{function t(e,t,r){var a=-1,n=e.length,i=t.length,o={};while(++a<n){var s=a<i?t[a]:void 0;r(o,e[a],s)}return o}e.exports=t},61448:(e,t,r)=>{var a=r(20426),n=r(49326);function i(e,t){return null!=e&&n(e,t,a)}e.exports=i},68821:(e,t,r)=>{var a=r(79920),n=a("map",r(55378));n.placeholder=r(2874),e.exports=n},69302:(e,t,r)=>{var a=r(83488),n=r(56757),i=r(32865);function o(e,t){return i(n(e,t,a),e+"")}e.exports=o},77126:e=>{var t=Array.prototype,r=t.reverse;function a(e){return null==e?e:r.call(e)}e.exports=a},89899:(e,t,r)=>{var a=r(79920),n=a("flow",r(49870));n.placeholder=r(2874),e.exports=n},93834:(e,t,r)=>{"use strict";r.d(t,{e:()=>pe});var a=r(93872),n=r(26254),i=r(20592);r(63534),r(19693),r(7899);function o(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}function s(e,t){if(null==e)return{};var r,a,n=o(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var c=r(70068),u=r(1952),l=r(11333),d=r.n(l),p=r(89899),h=r.n(p),f=r(10854),_=r.n(f),v=r(42093),y=r.n(v),w=r(33653),g=r.n(w),b=r(15497),m=r.n(b),k=r(68821),x=r.n(k),q=r(23181),A=r.n(q),$=r(31126),j=r.n($),C=r(73916),M=r.n(C),W=r(18938),O=r.n(W),U=r(44377),z=r.n(U),D=r(87612),Q=r.n(D),F=r(55378),K=r.n(F),S=r(47248),P=r.n(S),T=r(35970),L=r.n(T),I=r(79859),Y=r.n(I),B=r(2404),E=r.n(B),H=r(61448),R=r.n(H),V=(r(59581),r(17),r(5086),r(533),r(54989),r(79389),r(29979),r(14602),r(18636),r(80115),r(30789),r(60933),r(96380),r(91059),r(42838),r(42169),r(38839)),G=r(95093),Z=r.n(G),J=[{duration:1926,data:{app:"Firefox",title:"ActivityWatch/activitywatch: Track how you spend your time - Mozilla Firefox",url:"https://github.com/ActivityWatch/activitywatch",$category:["Work","Programming","ActivityWatch"]}},{duration:876,data:{app:"Firefox",title:"Inbox - Gmail - Mozilla Firefox",url:"https://mail.google.com",$category:["Comms","Email"]}},{duration:720,data:{app:"Firefox",title:"reddit: the front page of the internet - Mozilla Firefox",url:"https://reddit.com",$category:["Media","Social Media"]}},{duration:720,data:{app:"Firefox",title:"YouTube - Mozilla Firefox",url:"https://youtube.com",$category:["Media","Video"]}},{duration:540,data:{app:"Firefox",title:"Home / Twitter - Mozilla Firefox",url:"https://twitter.com",$category:["Media","Social Media"]}},{duration:540,data:{app:"Firefox",title:"Stack Overflow",url:"https://stackoverflow.com",$category:["Work","Programming"]}},{duration:2892,data:{app:"Terminal",title:"vim ~/code/activitywatch/aw-server/aw-webui/src",$category:["Work","Programming","ActivityWatch"]}},{duration:756,data:{app:"Terminal",title:"bash ~/code/activitywatch",$category:["Work","Programming","ActivityWatch"]}},{duration:3486,data:{app:"zoom",title:"Zoom Meeting",$category:["Comms","Video Conferencing"]}},{duration:1440,data:{app:"Minecraft",title:"Minecraft",$category:["Media","Games"]}},{duration:189,data:{app:"Spotify",title:"Spotify",$category:["Media","Music"]}}],N=r(82188),X=r(71056),ee=r(88113),te=r(97330),re=r(90296),ae=r(99543),ne=r(56194),ie=["timeperiod"];function oe(e){return(0,ee.zL)(e).map(ee.pl)}function se(e){return(0,ee.xy)(e).map(ee.pl)}function ce(e){return(0,ee.TH)(e).map(ee.pl)}function ue(e){return(0,ee.rw)(e).map(ee.pl)}function le(e){var t=(0,ae.n)();return e.map((function(e){return e.data["$color"]=t.get_category_color(e.data["$category"]),e}))}function de(e){var t=(0,ae.n)();return e.map((function(e){return e.data["$score"]=t.get_category_score(e.data["$category"]),e}))}var pe=(0,V.nY)("activity",{state:function(){return{loaded:!1,window:{available:!1,top_apps:[],top_titles:[]},browser:{available:!1,duration:0,top_domains:[],top_urls:[],top_titles:[]},editor:{available:!1,duration:0,top_files:[],top_languages:[],top_projects:[]},category:{available:!1,by_period:[],top:[]},active:{available:!1,duration:0,events:[],history:{}},android:{available:!1},stopwatch:{available:!1,top_stopwatches:[]},query_options:null,buckets:{loaded:!1,afk:[],window:[],editor:[],browser:[],android:[],stopwatch:[]}}},getters:{getActiveHistoryAroundTimeperiod:function(){var e=this;return function(t){var r=ue(t),a=r.map((function(t){return R()(e.active.history,t)?e.active.history[t]:[{timestamp:Z()(t.split("/")[0]).format(),duration:0,data:{}}]}));return a}},uncategorizedDuration:function(){if(!this.category.top)return null;var e=this.category.top.filter((function(e){return E()(e.data["$category"],["Uncategorized"])})),t=e.length>0?e[0].duration:0,r=this.category.top.reduce((function(e,t){return e+t.duration}),0);return[t,r]}},actions:{ensure_loaded:function(e){var t=this;return(0,u.A)((0,c.A)().mark((function r(){var a,n,i;return(0,c.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=(0,te.C$)(),r.next=3,a.ensureLoaded();case 3:if(n=(0,re._)(),console.info("Query options: ",e),t.loaded&&(0,ne.KU)().abort(),t.loaded&&t.query_options===e&&!e.force){r.next=61;break}return t.start_loading(e),e.timeperiod||(e.timeperiod=(0,ee.eE)(e.date,a.startOfDay)),r.next=11,n.ensureLoaded();case 11:return r.next=13,t.get_buckets(e);case 13:if(t.set_available(),!t.window.available){r.next=27;break}if(console.info(a.useMultidevice?"Querying multiple devices":"Querying a single device"),!a.useMultidevice){r.next=23;break}return i=n.hosts.filter((function(t){return t&&n.bucketsWindow(t).length>0&&(!t.startsWith("fakedata")||e.host.startsWith("fakedata"))})),console.info("Including hosts in multiquery: ",i),r.next=21,t.query_multidevice_full(e,i);case 21:r.next=25;break;case 23:return r.next=25,t.query_desktop_full(e);case 25:r.next=35;break;case 27:if(!t.android.available){r.next=32;break}return r.next=30,t.query_android(e);case 30:r.next=35;break;case 32:console.log("Cannot query windows as we are missing either an afk/window bucket pair or an android bucket"),t.query_window_completed(),t.query_category_time_by_period_completed();case 35:if(!t.active.available){r.next=40;break}return r.next=38,t.query_active_history(e);case 38:r.next=48;break;case 40:if(!t.android.available){r.next=45;break}return r.next=43,t.query_active_history_android(e);case 43:r.next=48;break;case 45:return console.log("Cannot call query_active_history as we do not have an afk bucket"),r.next=48,t.query_active_history_completed();case 48:if(!t.editor.available){r.next=53;break}return r.next=51,t.query_editor(e);case 51:r.next=56;break;case 53:return console.log("Cannot call query_editor as we do not have any editor buckets"),r.next=56,t.query_editor_completed();case 56:if(!t.window.available&&!t.android.available){r.next=59;break}return r.next=59,t.query_category_time_by_period(e);case 59:r.next=62;break;case 61:console.warn("ensure_loaded called twice with same query_options but without query_options.force = true, skipping...");case 62:case"end":return r.stop()}}),r)})))()},query_android:function(e){var t=this;return(0,u.A)((0,c.A)().mark((function r(){var a,n,i,o,s,u;return(0,c.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.timeperiod,n=e.filter_categories,i=[(0,ee.pl)(a)],o=(0,ae.n)(),s=N.Ay.appQuery(t.buckets.android[0],o.classes_for_query,n),r.next=6,(0,ne.KU)().query(i,s)["catch"](t.errorHandler);case 6:u=r.sent,t.query_window_completed(u[0]);case 8:case"end":return r.stop()}}),r)})))()},reset:function(){var e=this;return(0,u.A)((0,c.A)().mark((function t(){return(0,c.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:(0,ne.KU)().abort(),e.query_window_completed({}),e.query_browser_completed({}),e.query_editor_completed({}),e.query_category_time_by_period_completed({});case 5:case"end":return t.stop()}}),t)})))()},query_multidevice_full:function(e,t){var r=this;return(0,u.A)((0,c.A)().mark((function a(){var n,i,o,s,u,l,d,p;return(0,c.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.timeperiod,i=e.filter_categories,o=e.filter_afk,s=e.always_active_pattern,u=[(0,ee.pl)(n)],l=(0,ae.n)().classes_for_query,d=N.Ay.multideviceQuery({hosts:t,filter_afk:o,categories:l,filter_categories:i,host_params:{},always_active_pattern:s}),a.next=6,(0,ne.KU)().query(u,d,{name:"multidevice",verbose:!0});case 6:p=a.sent,r.query_window_completed(p[0].window);case 8:case"end":return a.stop()}}),a)})))()},query_desktop_full:function(e){var t=this;return(0,u.A)((0,c.A)().mark((function r(){var a,n,i,o,s,u,l,d,p,h;return(0,c.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.timeperiod,n=e.filter_categories,i=e.filter_afk,o=e.include_audible,s=e.include_stopwatch,u=e.always_active_pattern,l=[(0,ee.pl)(a)],d=(0,ae.n)().classes_for_query,p=N.Ay.fullDesktopQuery({bid_window:t.buckets.window[0],bid_afk:t.buckets.afk[0],bid_browsers:t.buckets.browser,bid_stopwatch:s&&t.buckets.stopwatch.length>0?t.buckets.stopwatch[0]:void 0,filter_afk:i,categories:d,filter_categories:n,include_audible:o,always_active_pattern:u}),r.next=6,(0,ne.KU)().query(l,p,{name:"fullDesktopQuery",verbose:!0});case 6:h=r.sent,t.query_window_completed(h[0].window),t.query_browser_completed(h[0].browser),s&&t.query_stopwatch_completed(h[0].stopwatch);case 10:case"end":return r.stop()}}),r)})))()},query_editor:function(e){var t=this;return(0,u.A)((0,c.A)().mark((function r(){var a,n,i,o;return(0,c.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.timeperiod,n=[(0,ee.pl)(a)],i=N.Ay.editorActivityQuery(t.buckets.editor),r.next=5,(0,ne.KU)().query(n,i,{name:"editorActivityQuery",verbose:!0});case 5:o=r.sent,t.query_editor_completed(o[0]);case 7:case"end":return r.stop()}}),r)})))()},query_active_history:function(e){var t=this;return(0,u.A)((0,c.A)().mark((function r(){var a,n,i,o,u,l,d,p,h,f;return(0,c.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.timeperiod,n=s(e,ie),i=(0,te.C$)(),o=(0,re._)(),u=ue(a).filter((function(e){return!Y()(t.active.history,e)&&new Date(e.split("/")[0])<new Date})),l=[],i.useMultidevice?(d=o.hosts.filter((function(e){return e&&o.bucketsAFK(e).length>0&&(!e.startsWith("fakedata")||n.host.startsWith("fakedata"))})),l=L()(d.map(o.bucketsAFK))):l=[t.buckets.afk[0]],p=N.Ay.activityQuery(l),r.next=9,(0,ne.KU)().query(u,p,{name:"activityQuery",verbose:!0});case 9:h=r.sent,f=P()(u,K()(h,(function(e){return Q()(e,(function(e){return"not-afk"==e.data.status}))}))),t.query_active_history_completed({active_history:f});case 12:case"end":return r.stop()}}),r)})))()},query_category_time_by_period:function(e){var t=this;return(0,u.A)((0,c.A)().mark((function r(){var a,o,s,u,l,d,p,h,f,_,v,y,w,g,b,m;return(0,c.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=e.timeperiod,o=e.filter_categories,s=e.filter_afk,u=e.include_stopwatch,l=e.dontQueryInactive,d=e.always_active_pattern,h=a.length[0],f=a.length[1],f.startsWith("day")&&1==h?p=oe(a):f.startsWith("day")||f.startsWith("week")&&1==h||f.startsWith("month")&&1==h?p=se(a):a.length[1].startsWith("year")&&1==a.length[0]?p=ce(a):console.error("Unknown timeperiod length: ".concat(a.length)),p=p.filter((function(e){return new Date(e.split("/")[0])<new Date})),_=(0,ne.KU)().controller.signal,v=!1,_.onabort=function(){v=!0,console.debug("Request aborted")},y=[],w=(0,i.A)(p),r.prev=10,b=(0,c.A)().mark((function e(){var r,a,i,p,h,f,w,b;return(0,c.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=g.value,!v){e.next=3;break}throw _["reason"]||"unknown reason";case 3:if(!(l&&t.active.events.length>0)){e.next=10;break}if(a=new Date(r.split("/")[0]),i=new Date(r.split("/")[1]),p=t.active.events.find((function(e){return a<new Date(e.timestamp)&&new Date(e.timestamp)<i})),p&&p.duration>0){e.next=10;break}return y=y.concat([{cat_events:[]}]),e.abrupt("return",1);case 10:return h=void 0!==t.buckets.android[0],f=(0,ae.n)().classes_for_query,w=N.Ay.categoryQuery((0,n.A)({bid_browsers:t.buckets.browser,bid_stopwatch:u&&t.buckets.stopwatch.length>0?t.buckets.stopwatch[0]:void 0,categories:f,filter_categories:o,filter_afk:s,always_active_pattern:d},h?{bid_android:t.buckets.android[0]}:{bid_afk:t.buckets.afk[0],bid_window:t.buckets.window[0]})),e.next=15,(0,ne.KU)().query([r],w,{verbose:!0,name:"categoryQuery"});case 15:b=e.sent,y=y.concat(b);case 17:case"end":return e.stop()}}),e)})),w.s();case 13:if((g=w.n()).done){r.next=19;break}return r.delegateYield(b(),"t0",15);case 15:if(!r.t0){r.next=17;break}return r.abrupt("continue",17);case 17:r.next=13;break;case 19:r.next=24;break;case 21:r.prev=21,r.t1=r["catch"](10),w.e(r.t1);case 24:return r.prev=24,w.f(),r.finish(24);case 27:m=P()(p,y),m=z()(O()(m).filter((function(e){return e[1]}))),t.query_category_time_by_period_completed({by_period:m});case 30:case"end":return r.stop()}}),r,null,[[10,21,24,27]])})))()},query_active_history_android:function(e){var t=this;return(0,u.A)((0,c.A)().mark((function r(){var a,n,i,o,s;return(0,c.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.timeperiod,n=ue(a).filter((function(e){return!Y()(t.active.history,e)})),r.next=4,(0,ne.KU)().query(n,N.Ay.activityQueryAndroid(t.buckets.android[0]));case 4:i=r.sent,o=P()(n,i),s=M()(o,(function(e,t){return[{timestamp:t.split("/")[0],duration:e,data:{status:"not-afk"}}]})),t.query_active_history_completed({active_history:s});case 8:case"end":return r.stop()}}),r)})))()},set_available:function(){this.window.available=this.buckets.afk.length>0&&this.buckets.window.length>0,this.browser.available=this.buckets.afk.length>0&&this.buckets.window.length>0&&this.buckets.browser.length>0,this.active.available=this.buckets.afk.length>0,this.editor.available=this.buckets.editor.length>0,this.android.available=this.buckets.android.length>0,this.category.available=this.window.available||this.android.available,this.stopwatch.available=this.buckets.stopwatch.length>0},get_buckets:function(e){var t=this;return(0,u.A)((0,c.A)().mark((function r(){var a,n;return(0,c.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=e.host,n=(0,re._)(),t.buckets.afk=n.bucketsAFK(a),t.buckets.window=n.bucketsWindow(a),t.buckets.android=n.bucketsAndroid(a),t.buckets.browser=n.bucketsBrowser(a),t.buckets.editor=n.bucketsEditor(a),t.buckets.stopwatch=n.bucketsStopwatch(a),console.log("Available buckets: ",t.buckets),t.buckets.loaded=!0;case 10:case"end":return r.stop()}}),r)})))()},load_demo:function(){var e=this;return(0,u.A)((0,c.A)().mark((function t(){var r,n,i,o,s,u,l,p,f,v;return(0,c.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:v=function(){var e={},t=Z()((0,X.get_day_start_with_offset)(null,f));return K()(A()(0,30),(function(){var r=Z()(t).add(1,"day");e["".concat(t.format(),"/").concat(r.format())]=[{timestamp:t.format(),duration:100+900*Math.random(),data:{status:"not-afk"}}],t=t.add(-1,"day")})),e},r=function(e,t,r){return h()(m()(r),y()(r),g(),x()((function(e){return{duration:j()(e,"duration"),data:(0,a.A)({},t,r(e[0]))}})),_()("duration"),d())(e)},e.start_loading({}),n=r(J,"app",(function(e){return e.data.app})),i=r(J,"title",(function(e){return e.data.title})),o=r(J,"$category",(function(e){return e.data.$category})),s=r(J,"url",(function(e){return e.data.url})),u=r(J,"$domain",(function(e){return void 0===e.data.url?"":new URL(e.data.url).host})),l=r(J.filter((function(e){return e.data.url})),"title",(function(e){return e.data.title})),e.query_window_completed({duration:j()(J,"duration"),app_events:n,title_events:i,cat_events:o,active_events:[{timestamp:(new Date).toISOString(),duration:5400,data:{afk:"not-afk"}}]}),e.buckets.browser=["aw-watcher-firefox"],e.query_browser_completed({duration:j()(s,"duration"),domains:u,urls:s,titles:l}),e.buckets.editor=["aw-watcher-vim"],e.query_editor_completed({duration:30,files:[{duration:10,data:{file:"test.py"}}],languages:[{duration:10,data:{language:"python"}}],projects:[{duration:10,data:{project:"aw-core"}}]}),e.buckets.loaded=!0,p=(0,te.C$)(),f=p.startOfDay,e.query_active_history_completed({active_history:v()});case 18:case"end":return t.stop()}}),t)})))()},start_loading:function(e){this.loaded=!0,this.query_options=e,this.window.top_apps=null,this.window.top_titles=null,this.browser.duration=0,this.browser.top_domains=null,this.browser.top_urls=null,this.browser.top_titles=null,this.editor.duration=0,this.editor.top_files=null,this.editor.top_languages=null,this.editor.top_projects=null,this.category.top=null,this.category.by_period=null,this.active.duration=null,0===Object.keys(this.active.history).length&&(this.active.history={})},query_window_completed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{app_events:[],title_events:[],cat_events:[],active_events:[],duration:0};e.cat_events&&(e.cat_events=le(e.cat_events),e.cat_events=de(e.cat_events)),this.window.top_apps=e.app_events,this.window.top_titles=e.title_events,this.category.top=e.cat_events,this.active.duration=e.duration,this.active.events=e.active_events},query_browser_completed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{domains:[],urls:[],titles:[],duration:0};this.browser.top_domains=e.domains,this.browser.top_urls=e.urls,this.browser.top_titles=e.titles,this.browser.duration=e.duration},query_stopwatch_completed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stopwatch_events:[]};this.stopwatch.top_stopwatches=e.stopwatch_events},query_editor_completed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{duration:0,files:[],languages:[],projects:[]};this.editor.duration=e.duration,this.editor.top_files=e.files,this.editor.top_languages=e.languages,this.editor.top_projects=e.projects},query_active_history_completed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{active_history:{}},t=e.active_history;this.active.history=(0,n.A)((0,n.A)({},this.active.history),t)},query_category_time_by_period_completed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{by_period:[]},t=e.by_period;this.category.by_period=t}}})},96493:e=>{e.exports={cap:!1,curry:!1,fixed:!1,immutable:!1,rearg:!1}},99543:(e,t,r)=>{"use strict";r.d(t,{n:()=>m});var a=r(55378),n=r.n(a),i=r(94506),o=r.n(i),s=r(35970),c=r.n(s),u=r(50014),l=r.n(u),d=r(33031),p=r.n(d),h=r(88055),f=r.n(h),_=r(2404),v=r.n(_),y=(r(14913),r(98741),r(18636),r(5086),r(59581),r(17),r(28743),r(80475),r(35231),r(80115),r(80749)),w=r(51278),g=r(38839);function b(e,t){if(e&&e.data&&e.data.score)return e.data.score;if(e&&e.name.slice(0,-1).length>0){var r=e.name.slice(0,-1),a=t.find((function(e){return v()(e.name,r)}));return b(a,t)}return 0}var m=(0,g.nY)("categories",{state:function(){return{classes:[],classes_unsaved_changes:!1}},getters:{classes_clean:function(){return this.classes.map(y.k8)},classes_hierarchy:function(){var e=(0,y.YB)(f()(this.classes));return p()(e,[function(e){return e.id||0}])},classes_for_query:function(){return this.classes.filter((function(e){return null!==e.rule.type})).map((function(e){return[e.name,e.rule]}))},all_categories:function(){return l()(c()(this.classes.map((function(e){for(var t=[],r=1;r<=e.name.length;r++)t.push(e.name.slice(0,r));return t}))),(function(e){return e.join(">>>>")}))},allCategoriesSelect:function(){var e=this.all_categories,t=e.map((function(e){return{text:e.join(" > "),value:e,id:e.id}}));return p()(t,"text")},get_category:function(){var e=this;return function(t){("string"===typeof t||t instanceof String)&&console.error("Passed category was string, expected array. Lookup will fail.");var r=e.classes.find((function(e){return v()(e.name,t)}));return r?(0,y.fz)(f()(r)):(v()(t,["Uncategorized"])||console.error("Couldn't find category: ",t),{name:["Uncategorized"],rule:{type:"none"}})}},get_category_by_id:function(){var e=this;return function(t){return(0,y.fz)(f()(e.classes.find((function(e){return e.id==t}))))}},get_category_color:function(){var e=this;return function(t){return(0,w._V)(e.get_category(t),e.classes)}},get_category_score:function(){var e=this;return function(t){return b(e.get_category(t),e.classes)}},category_select:function(){var e=this;return function(t){var r=e.all_categories;return r=r.map((function(e){return{text:e.join(" > "),value:e}})).sort((function(e,t){return e.text>t.text})),t&&(r=[{text:"All",value:null},{text:"Uncategorized",value:["Uncategorized"]}].concat(r)),r}}},actions:{load:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===e&&(e=(0,y.fw)()),e=(0,y.Cq)(e);var t=0;this.classes=e.map((function(e){return Object.assign(e,{id:t++})})),this.classes_unsaved_changes=!1},save:function(){var e=(0,y.UL)(this.classes);return this.classes_unsaved_changes=!1,e},import:function(e){var t=0;this.classes=e.map((function(e){return Object.assign(e,{id:t++})})),this.classes_unsaved_changes=!0},updateClass:function(e){console.log("Updating class:",e);var t=this.classes.find((function(t){return t.id===e.id})),r=t.name,a=t.name.length;void 0===e.id||null===e.id?(e.id=o()(n()(this.classes,"id"))+1,this.classes.push(e)):Object.assign(t,e),n()(this.classes,(function(t){v()(r,t.name.slice(0,a))&&(t.name=e.name.concat(t.name.slice(a)),console.log("Renamed child:",t.name))})),this.classes_unsaved_changes=!0},addClass:function(e){e.id=o()(n()(this.classes,"id"))+1,this.classes.push(e),this.classes_unsaved_changes=!0},removeClass:function(e){this.classes=this.classes.filter((function(t){return t.id!==e})),this.classes_unsaved_changes=!0},appendClassRule:function(e,t){var r=this.classes.find((function(t){return t.id===e}));"none"===r.rule.type||null===r.rule.type?(r.rule.type="regex",r.rule.regex=t):"regex"===r.rule.type&&(r.rule.regex+="|"+t),this.classes_unsaved_changes=!0},restoreDefaultClasses:function(){var e=0;this.classes=(0,y.Cq)(y.mT).map((function(t){return Object.assign(t,{id:e++})})),this.classes_unsaved_changes=!0},clearAll:function(){this.classes=[],this.classes_unsaved_changes=!0}}})}}]);
//# sourceMappingURL=3834.9dab8e27.js.map