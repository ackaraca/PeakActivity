(self["webpackChunkaw_webui"]=self["webpackChunkaw_webui"]||[]).push([[1674],{1674:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});n(19693);var r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("b-form-group",[t("b-form-select",{model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[t("option",{attrs:{value:"custom"}},[e._v("Custom regex")]),t("option",{attrs:{value:"categories"}},[e._v("Use existing categories")])])],1),t("b-input-group",["categories"==e.mode?t("aw-select-categories",{model:{value:e.filterCategoriesData,callback:function(t){e.filterCategoriesData=t},expression:"filterCategoriesData"}}):e._e(),"custom"==e.mode?t("b-input",{attrs:{placeholder:"Regex pattern to search for"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.generate()}},model:{value:e.pattern,callback:function(t){e.pattern=t},expression:"pattern"}}):e._e(),t("b-input-group-append",[e._t("input-group-append")],2)],1)],1)},s=[],a=n(70068),i=n(1952),u=n(75530),o=n(20592),c=(n(59581),n(17),n(5086),n(80475),n(98741),n(47746),n(43148),n(80115),n(85471)),l=n(99543),f=" > ";const h=c["default"].extend({name:"SelectCategoriesOrPattern",props:{filterCategories:{type:Array,default:function(){return[]}}},data:function(){return{mode:"categories",pattern:"",filterCategoriesData:[]}},computed:{categories:function(){return(0,l.n)().classes},categoriesWithRules:function(){var e=this;return"categories"===this.mode?this.categories.filter((function(t){var n,r=t.name.join(f),s=(0,o.A)(e.filterCategoriesData);try{for(s.s();!(n=s.n()).done;){var a=n.value;if(r.includes(a.join(f)))return!0}}catch(i){s.e(i)}finally{s.f()}return!1})).filter((function(e){return"regex"===e.rule.type})).map((function(e){return[e.name,e.rule]})):"custom"===this.mode?[[["searched"],{type:"regex",regex:this.pattern}]]:(console.error("Unknown mode:",this.mode),[])}},watch:{filterCategories:function(){this.filterCategoriesData=[].concat((0,u.A)(this.filterCategoriesData),(0,u.A)(this.filterCategories))},filterCategoriesData:function(){this.$emit("input",this.categoriesWithRules),console.log(this.categoriesWithRules)},pattern:function(){this.$emit("input",this.categoriesWithRules),console.log(this.categoriesWithRules)}},mounted:function(){return(0,i.A)((0,a.A)().mark((function e(){return(0,a.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,l.n)().load();case 2:case"end":return e.stop()}}),e)})))()}}),g=h;var p=n(81656),d=(0,p.A)(g,r,s,!1,null,null,null);const v=d.exports},2523:e=>{function t(e,t,n,r){var s=e.length,a=n+(r?1:-1);while(r?a--:++a<s)if(t(e[a],a,e))return a;return-1}e.exports=t},15325:(e,t,n)=>{var r=n(96131);function s(e,t){var n=null==e?0:e.length;return!!n&&r(e,t,0)>-1}e.exports=s},29905:e=>{function t(e,t,n){var r=-1,s=null==e?0:e.length;while(++r<s)if(n(t,e[r]))return!0;return!1}e.exports=t},32865:(e,t,n)=>{var r=n(97189),s=n(51811),a=s(r);e.exports=a},33031:(e,t,n)=>{var r=n(83120),s=n(46155),a=n(69302),i=n(36800),u=a((function(e,t){if(null==e)return[];var n=t.length;return n>1&&i(e,t[0],t[1])?t=[]:n>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),s(e,r(t,1),[])}));e.exports=u},35970:(e,t,n)=>{var r=n(83120);function s(e){var t=null==e?0:e.length;return t?r(e,1):[]}e.exports=s},36800:(e,t,n)=>{var r=n(75288),s=n(64894),a=n(30361),i=n(23805);function u(e,t,n){if(!i(n))return!1;var u=typeof t;return!!("number"==u?s(n)&&a(t,n.length):"string"==u&&t in n)&&r(n[t],e)}e.exports=u},37334:e=>{function t(e){return function(){return e}}e.exports=t},44517:(e,t,n)=>{var r=n(76545),s=n(63950),a=n(84247),i=1/0,u=r&&1/a(new r([,-0]))[1]==i?function(e){return new r(e)}:s;e.exports=u},50014:(e,t,n)=>{var r=n(15389),s=n(55765);function a(e,t){return e&&e.length?s(e,r(t,2)):[]}e.exports=a},51811:e=>{var t=800,n=16,r=Date.now;function s(e){var s=0,a=0;return function(){var i=r(),u=n-(i-a);if(a=i,u>0){if(++s>=t)return arguments[0]}else s=0;return e.apply(void 0,arguments)}}e.exports=s},55765:(e,t,n)=>{var r=n(38859),s=n(15325),a=n(29905),i=n(19219),u=n(44517),o=n(84247),c=200;function l(e,t,n){var l=-1,f=s,h=e.length,g=!0,p=[],d=p;if(n)g=!1,f=a;else if(h>=c){var v=t?null:u(e);if(v)return o(v);g=!1,f=i,d=new r}else d=t?[]:p;e:while(++l<h){var m=e[l],_=t?t(m):m;if(m=n||0!==m?m:0,g&&_===_){var x=d.length;while(x--)if(d[x]===_)continue e;t&&d.push(_),p.push(m)}else f(d,_,n)||(d!==p&&d.push(_),p.push(m))}return p}e.exports=l},56757:(e,t,n)=>{var r=n(91033),s=Math.max;function a(e,t,n){return t=s(void 0===t?e.length-1:t,0),function(){var a=arguments,i=-1,u=s(a.length-t,0),o=Array(u);while(++i<u)o[i]=a[t+i];i=-1;var c=Array(t+1);while(++i<t)c[i]=a[i];return c[t]=n(o),r(e,this,c)}}e.exports=a},63950:e=>{function t(){}e.exports=t},69302:(e,t,n)=>{var r=n(83488),s=n(56757),a=n(32865);function i(e,t){return a(s(e,t,r),e+"")}e.exports=i},76959:e=>{function t(e,t,n){var r=n-1,s=e.length;while(++r<s)if(e[r]===t)return r;return-1}e.exports=t},85463:e=>{function t(e){return e!==e}e.exports=t},91033:e=>{function t(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=t},94506:(e,t,n)=>{var r=n(93599),s=n(3335),a=n(83488);function i(e){return e&&e.length?r(e,a,s):void 0}e.exports=i},96131:(e,t,n)=>{var r=n(2523),s=n(85463),a=n(76959);function i(e,t,n){return t===t?a(e,t,n):r(e,s,n)}e.exports=i},97189:(e,t,n)=>{var r=n(37334),s=n(93243),a=n(83488),i=s?function(e,t){return s(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=i},99543:(e,t,n)=>{"use strict";n.d(t,{n:()=>w});var r=n(55378),s=n.n(r),a=n(94506),i=n.n(a),u=n(35970),o=n.n(u),c=n(50014),l=n.n(c),f=n(33031),h=n.n(f),g=n(88055),p=n.n(g),d=n(2404),v=n.n(d),m=(n(14913),n(98741),n(18636),n(5086),n(59581),n(17),n(28743),n(80475),n(35231),n(80115),n(80749)),_=n(51278),x=n(38839);function y(e,t){if(e&&e.data&&e.data.score)return e.data.score;if(e&&e.name.slice(0,-1).length>0){var n=e.name.slice(0,-1),r=t.find((function(e){return v()(e.name,n)}));return y(r,t)}return 0}var w=(0,x.nY)("categories",{state:function(){return{classes:[],classes_unsaved_changes:!1}},getters:{classes_clean:function(){return this.classes.map(m.k8)},classes_hierarchy:function(){var e=(0,m.YB)(p()(this.classes));return h()(e,[function(e){return e.id||0}])},classes_for_query:function(){return this.classes.filter((function(e){return null!==e.rule.type})).map((function(e){return[e.name,e.rule]}))},all_categories:function(){return l()(o()(this.classes.map((function(e){for(var t=[],n=1;n<=e.name.length;n++)t.push(e.name.slice(0,n));return t}))),(function(e){return e.join(">>>>")}))},allCategoriesSelect:function(){var e=this.all_categories,t=e.map((function(e){return{text:e.join(" > "),value:e,id:e.id}}));return h()(t,"text")},get_category:function(){var e=this;return function(t){("string"===typeof t||t instanceof String)&&console.error("Passed category was string, expected array. Lookup will fail.");var n=e.classes.find((function(e){return v()(e.name,t)}));return n?(0,m.fz)(p()(n)):(v()(t,["Uncategorized"])||console.error("Couldn't find category: ",t),{name:["Uncategorized"],rule:{type:"none"}})}},get_category_by_id:function(){var e=this;return function(t){return(0,m.fz)(p()(e.classes.find((function(e){return e.id==t}))))}},get_category_color:function(){var e=this;return function(t){return(0,_._V)(e.get_category(t),e.classes)}},get_category_score:function(){var e=this;return function(t){return y(e.get_category(t),e.classes)}},category_select:function(){var e=this;return function(t){var n=e.all_categories;return n=n.map((function(e){return{text:e.join(" > "),value:e}})).sort((function(e,t){return e.text>t.text})),t&&(n=[{text:"All",value:null},{text:"Uncategorized",value:["Uncategorized"]}].concat(n)),n}}},actions:{load:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===e&&(e=(0,m.fw)()),e=(0,m.Cq)(e);var t=0;this.classes=e.map((function(e){return Object.assign(e,{id:t++})})),this.classes_unsaved_changes=!1},save:function(){var e=(0,m.UL)(this.classes);return this.classes_unsaved_changes=!1,e},import:function(e){var t=0;this.classes=e.map((function(e){return Object.assign(e,{id:t++})})),this.classes_unsaved_changes=!0},updateClass:function(e){console.log("Updating class:",e);var t=this.classes.find((function(t){return t.id===e.id})),n=t.name,r=t.name.length;void 0===e.id||null===e.id?(e.id=i()(s()(this.classes,"id"))+1,this.classes.push(e)):Object.assign(t,e),s()(this.classes,(function(t){v()(n,t.name.slice(0,r))&&(t.name=e.name.concat(t.name.slice(r)),console.log("Renamed child:",t.name))})),this.classes_unsaved_changes=!0},addClass:function(e){e.id=i()(s()(this.classes,"id"))+1,this.classes.push(e),this.classes_unsaved_changes=!0},removeClass:function(e){this.classes=this.classes.filter((function(t){return t.id!==e})),this.classes_unsaved_changes=!0},appendClassRule:function(e,t){var n=this.classes.find((function(t){return t.id===e}));"none"===n.rule.type||null===n.rule.type?(n.rule.type="regex",n.rule.regex=t):"regex"===n.rule.type&&(n.rule.regex+="|"+t),this.classes_unsaved_changes=!0},restoreDefaultClasses:function(){var e=0;this.classes=(0,m.Cq)(m.mT).map((function(t){return Object.assign(t,{id:e++})})),this.classes_unsaved_changes=!0},clearAll:function(){this.classes=[],this.classes_unsaved_changes=!0}}})}}]);
//# sourceMappingURL=1674.744da4de.js.map