(self["webpackChunkaw_webui"]=self["webpackChunkaw_webui"]||[]).push([[1587],{11587:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>g});n(59581),n(17),n(5086);var i=function(){var t=this,e=t._self._c;return e("div",[e("h2",[t._v("Timeline")]),e("input-timeinterval",{staticClass:"mb-3",attrs:{defaultDuration:t.timeintervalDefaultDuration,maxDuration:t.maxDuration},model:{value:t.daterange,callback:function(e){t.daterange=e},expression:"daterange"}}),e("div",{staticClass:"d-inline-block border rounded p-2 mr-2"},[t._v("Events shown: "+t._s(t.num_events))]),e("div",{staticClass:"d-inline-block border rounded p-2 mr-2"},[t._v("Swimlanes: "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.swimlane,expression:"swimlane"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.swimlane=e.target.multiple?n:n[0]}}},[e("option",{domProps:{value:null}},[t._v("None")]),e("option",{attrs:{value:"category"}},[t._v("Categories")]),e("option",{attrs:{value:"bucketType"}},[t._v("Bucket Specific")])])]),e("details",{staticClass:"d-inline-block bg-light small border rounded mr-2 px-2"},[e("summary",{staticClass:"p-2"},[e("b",[t._v("Filters: "+t._s(t.filter_summary))])]),e("div",{staticClass:"p-2 bg-light"},[e("table",[e("tr",[t._m(0),e("td",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_hostname,expression:"filter_hostname"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filter_hostname=e.target.multiple?n:n[0]}}},[e("option",{domProps:{value:null}},[t._v("All")]),t._l(t.hosts,(function(n){return e("option",{domProps:{value:n}},[t._v(t._s(n))])}))],2)])]),e("tr",[t._m(1),e("td",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_client,expression:"filter_client"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filter_client=e.target.multiple?n:n[0]}}},[e("option",{domProps:{value:null}},[t._v("All")]),t._l(t.clients,(function(n){return e("option",{domProps:{value:n}},[t._v(t._s(n))])}))],2)])])])])]),0!==t.num_events?e("div",{staticClass:"d-inline-block border rounded p-2 mr-2"},[t._v("Events shown: "+t._s(t.num_events))]):t._e(),0===t.num_events?e("b-alert",{staticClass:"d-inline-block p-2 mb-0 mt-2",attrs:{variant:"warning",show:""}},[t._v("No events match selected criteria. Timeline is not updated.")]):t._e(),e("div",{staticClass:"float-right small text-muted pt-3"},[e("tr",[t._m(2),e("td",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_duration,expression:"filter_duration"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filter_duration=e.target.multiple?n:n[0]}}},[e("option",{domProps:{value:null}},[t._v("All")]),e("option",{domProps:{value:2}},[t._v("2+ secs")]),e("option",{domProps:{value:5}},[t._v("5+ secs")]),e("option",{domProps:{value:10}},[t._v("10+ secs")]),e("option",{domProps:{value:30}},[t._v("30+ sec")]),e("option",{domProps:{value:60}},[t._v("1+ mins")]),e("option",{domProps:{value:120}},[t._v("2+ mins")]),e("option",{domProps:{value:180}},[t._v("3+ mins")]),e("option",{domProps:{value:600}},[t._v("10+ mins")]),e("option",{domProps:{value:1800}},[t._v("30+ mins")]),e("option",{domProps:{value:3600}},[t._v("1+ hrs")]),e("option",{domProps:{value:7200}},[t._v("2+ hrs")])])])])]),e("div",{staticClass:"d-inline-block pt-3",staticStyle:{float:"right",color:"#999"}},[t._v("Drag to pan and scroll to zoom")]),null!==t.buckets?e("div",[e("div",{staticStyle:{clear:"both"}}),e("vis-timeline",{attrs:{buckets:t.buckets,showRowLabels:!0,queriedInterval:t.daterange,swimlane:t.swimlane,updateTimelineWindow:t.updateTimelineWindow}}),e("aw-devonly",{attrs:{reason:"Not ready for production, still experimenting"}},[e("aw-calendar",{attrs:{buckets:t.buckets}})],1)],1):e("div",[e("h1",{staticClass:"aw-loading"},[t._v("Loading...")])])],1)},r=[function(){var t=this,e=t._self._c;return e("th",{staticClass:"pt-2 pr-3"},[e("label",[t._v("Host:")])])},function(){var t=this,e=t._self._c;return e("th",{staticClass:"pt-2 pr-3"},[e("label",[t._v("Client:")])])},function(){var t=this,e=t._self._c;return e("th",{staticClass:"pt-2 pr-3"},[e("label",[t._v("Duration:")])])}],l=n(70068),a=n(20592),s=n(1952),o=n(87612),u=n.n(o),c=n(31126),d=n.n(c),v=(n(94009),n(28743),n(80475),n(12824),n(19693),n(97330)),m=n(90296),p=n(71056);const _={name:"Timeline",data:function(){return{all_buckets:null,hosts:null,buckets:null,clients:null,daterange:null,maxDuration:2678400,filter_hostname:null,filter_client:null,filter_duration:null,swimlane:null,updateTimelineWindow:!0}},computed:{timeintervalDefaultDuration:function(){var t=(0,v.C$)();return Number(t.durationDefault)},num_events:function(){return d()(this.buckets,"events.length")},filter_summary:function(){var t=[];return this.filter_hostname&&t.push(this.filter_hostname),this.filter_client&&t.push(this.filter_client),this.filter_duration>0&&t.push((0,p.seconds_to_duration)(this.filter_duration)),t.length>0?t.join(", "):"none"}},watch:{daterange:function(){this.updateTimelineWindow=!0,this.getBuckets()},filter_hostname:function(){this.updateTimelineWindow=!1,this.getBuckets()},filter_client:function(){this.updateTimelineWindow=!1,this.getBuckets()},filter_duration:function(){this.updateTimelineWindow=!1,this.getBuckets()},swimlane:function(){this.updateTimelineWindow=!1,this.getBuckets()}},methods:{getBuckets:function(){var t=(0,s.A)((0,l.A)().mark((function t(){var e,n,i,r,s=this;return(0,l.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=this.daterange){t.next=2;break}return t.abrupt("return");case 2:return t.t0=Object,t.next=5,(0,m._)().getBucketsWithEvents({start:this.daterange[0].format(),end:this.daterange[1].format()});case 5:if(t.t1=t.sent,this.all_buckets=t.t0.freeze.call(t.t0,t.t1),this.hosts=this.all_buckets.map((function(t){return t.hostname})).filter((function(t,e,n){return n.indexOf(t)===e})),this.clients=this.all_buckets.map((function(t){return t.client})).filter((function(t,e,n){return n.indexOf(t)===e})),e=this.all_buckets,this.filter_hostname&&(e=u()(e,(function(t){return t.hostname==s.filter_hostname}))),this.filter_client&&(e=u()(e,(function(t){return t.client==s.filter_client}))),this.filter_duration>0){n=(0,a.A)(e);try{for(n.s();!(i=n.n()).done;)r=i.value,r.events=u()(r.events,(function(t){return t.duration>=s.filter_duration}))}catch(l){n.e(l)}finally{n.f()}}this.buckets=e;case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},f=_;var h=n(81656),b=(0,h.A)(f,i,r,!1,null,"5022351b",null);const g=b.exports},31126:(t,e,n)=>{var i=n(15389),r=n(40102);function l(t,e){return t&&t.length?r(t,i(e,2)):0}t.exports=l},40102:t=>{function e(t,e){var n,i=-1,r=t.length;while(++i<r){var l=e(t[i]);void 0!==l&&(n=void 0===n?l:n+l)}return n}t.exports=e}}]);
//# sourceMappingURL=1587.a88d9bfb.js.map