(self["webpackChunkaw_webui"]=self["webpackChunkaw_webui"]||[]).push([[296],{2523:t=>{function e(t,e,n,r){var u=t.length,a=n+(r?1:-1);while(r?a--:++a<u)if(e(t[a],a,t))return a;return-1}t.exports=e},15325:(t,e,n)=>{var r=n(96131);function u(t,e){var n=null==t?0:t.length;return!!n&&r(t,e,0)>-1}t.exports=u},16414:t=>{function e(){}t.exports=e},16574:(t,e,n)=>{var r=n(80909);function u(t,e){var n=[];return r(t,(function(t,r,u){e(t,r,u)&&n.push(t)})),n}t.exports=u},18938:(t,e,n)=>{var r=n(82963),u=n(95950),a=r(u);t.exports=a},29905:t=>{function e(t,e,n){var r=-1,u=null==t?0:t.length;while(++r<u)if(n(e,t[r]))return!0;return!1}t.exports=e},30980:(t,e,n)=>{var r=n(39344),u=n(16414),a=4294967295;function i(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=a,this.__views__=[]}i.prototype=r(u.prototype),i.prototype.constructor=i,t.exports=i},31684:(t,e,n)=>{var r=n(93599),u=n(56176),a=n(83488);function i(t){return t&&t.length?r(t,a,u):void 0}t.exports=i},32865:(t,e,n)=>{var r=n(97189),u=n(51811),a=u(r);t.exports=a},35970:(t,e,n)=>{var r=n(83120);function u(t){var e=null==t?0:t.length;return e?r(t,1):[]}t.exports=u},37334:t=>{function e(t){return function(){return t}}t.exports=e},37381:(t,e,n)=>{var r=n(48152),u=n(63950),a=r?function(t){return r.get(t)}:u;t.exports=a},38816:(t,e,n)=>{var r=n(35970),u=n(56757),a=n(32865);function i(t){return a(u(t,void 0,r),t+"")}t.exports=i},42e3:(t,e,n)=>{var r=n(63945),u=n(62429),a=n(15389),i=n(56449);function o(t,e){return function(n,o){var s=i(n)?r:u,c=e?e():{};return s(n,t,a(o,2),c)}}t.exports=o},44377:t=>{function e(t){var e=-1,n=null==t?0:t.length,r={};while(++e<n){var u=t[e];r[u[0]]=u[1]}return r}t.exports=e},44517:(t,e,n)=>{var r=n(76545),u=n(63950),a=n(84247),i=1/0,o=r&&1/a(new r([,-0]))[1]==i?function(t){return new r(t)}:u;t.exports=o},48152:(t,e,n)=>{var r=n(28303),u=r&&new r;t.exports=u},49870:(t,e,n)=>{var r=n(66929),u=r();t.exports=u},51811:t=>{var e=800,n=16,r=Date.now;function u(t){var u=0,a=0;return function(){var i=r(),o=n-(i-a);if(a=i,o>0){if(++u>=e)return arguments[0]}else u=0;return t.apply(void 0,arguments)}}t.exports=u},53758:(t,e,n)=>{var r=n(30980),u=n(56017),a=n(16414),i=n(56449),o=n(40346),s=n(80257),c=Object.prototype,p=c.hasOwnProperty;function f(t){if(o(t)&&!i(t)&&!(t instanceof r)){if(t instanceof u)return t;if(p.call(t,"__wrapped__"))return s(t)}return new u(t)}f.prototype=a.prototype,f.prototype.constructor=f,t.exports=f},55765:(t,e,n)=>{var r=n(38859),u=n(15325),a=n(29905),i=n(19219),o=n(44517),s=n(84247),c=200;function p(t,e,n){var p=-1,f=u,h=t.length,v=!0,l=[],d=l;if(n)v=!1,f=a;else if(h>=c){var _=e?null:o(t);if(_)return s(_);v=!1,f=i,d=new r}else d=e?[]:l;t:while(++p<h){var w=t[p],x=e?e(w):w;if(w=n||0!==w?w:0,v&&x===x){var k=d.length;while(k--)if(d[k]===x)continue t;e&&d.push(x),l.push(w)}else f(d,x,n)||(d!==l&&d.push(x),l.push(w))}return l}t.exports=p},56017:(t,e,n)=>{var r=n(39344),u=n(16414);function a(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}a.prototype=r(u.prototype),a.prototype.constructor=a,t.exports=a},56176:t=>{function e(t,e){return t<e}t.exports=e},56757:(t,e,n)=>{var r=n(91033),u=Math.max;function a(t,e,n){return e=u(void 0===e?t.length-1:e,0),function(){var a=arguments,i=-1,o=u(a.length-e,0),s=Array(o);while(++i<o)s[i]=a[e+i];i=-1;var c=Array(e+1);while(++i<e)c[i]=a[i];return c[e]=n(s),r(t,this,c)}}t.exports=a},62284:(t,e,n)=>{var r=n(84629),u=Object.prototype,a=u.hasOwnProperty;function i(t){var e=t.name+"",n=r[e],u=a.call(r,e)?n.length:0;while(u--){var i=n[u],o=i.func;if(null==o||o==t)return i.name}return e}t.exports=i},62429:(t,e,n)=>{var r=n(80909);function u(t,e,n,u){return r(t,(function(t,r,a){e(u,t,n(t),a)})),u}t.exports=u},63375:(t,e,n)=>{var r=n(55765);function u(t){return t&&t.length?r(t):[]}t.exports=u},63945:t=>{function e(t,e,n,r){var u=-1,a=null==t?0:t.length;while(++u<a){var i=t[u];e(r,i,n(i),t)}return r}t.exports=e},63950:t=>{function e(){}t.exports=e},66929:(t,e,n)=>{var r=n(56017),u=n(38816),a=n(37381),i=n(62284),o=n(56449),s=n(85087),c="Expected a function",p=8,f=32,h=128,v=256;function l(t){return u((function(e){var n=e.length,u=n,l=r.prototype.thru;t&&e.reverse();while(u--){var d=e[u];if("function"!=typeof d)throw new TypeError(c);if(l&&!_&&"wrapper"==i(d))var _=new r([],!0)}u=_?u:n;while(++u<n){d=e[u];var w=i(d),x="wrapper"==w?a(d):void 0;_=x&&s(x[0])&&x[1]==(h|p|f|v)&&!x[4].length&&1==x[9]?_[i(x[0])].apply(_,x[3]):1==d.length&&s(d)?_[w]():_.thru(d)}return function(){var t=arguments,r=t[0];if(_&&1==t.length&&o(r))return _.plant(r).value();var u=0,a=n?e[u].apply(this,t):r;while(++u<n)a=e[u].call(this,a);return a}}))}t.exports=l},70799:t=>{function e(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}t.exports=e},73916:(t,e,n)=>{var r=n(43360),u=n(30641),a=n(15389);function i(t,e){var n={};return e=a(e,3),u(t,(function(t,u,a){r(n,u,e(t,u,a))})),n}t.exports=i},76959:t=>{function e(t,e,n){var r=n-1,u=t.length;while(++r<u)if(t[r]===e)return r;return-1}t.exports=e},80257:(t,e,n)=>{var r=n(30980),u=n(56017),a=n(23007);function i(t){if(t instanceof r)return t.clone();var e=new u(t.__wrapped__,t.__chain__);return e.__actions__=a(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}t.exports=i},82963:(t,e,n)=>{var r=n(91372),u=n(5861),a=n(20317),i=n(70799),o="[object Map]",s="[object Set]";function c(t){return function(e){var n=u(e);return n==o?a(e):n==s?i(e):r(e,t(e))}}t.exports=c},84629:t=>{var e={};t.exports=e},85087:(t,e,n)=>{var r=n(30980),u=n(37381),a=n(62284),i=n(53758);function o(t){var e=a(t),n=i[e];if("function"!=typeof n||!(e in r.prototype))return!1;if(t===n)return!0;var o=u(n);return!!o&&t===o[0]}t.exports=o},85463:t=>{function e(t){return t!==t}t.exports=e},87612:(t,e,n)=>{var r=n(79770),u=n(16574),a=n(15389),i=n(56449);function o(t,e){var n=i(t)?r:u;return n(t,a(e,3))}t.exports=o},90296:(t,e,n)=>{"use strict";n.d(e,{_:()=>D});var r=n(70068),u=n(1952),a=n(93872),i=n(26254),o=n(88055),s=n.n(o),c=n(44377),p=n.n(c),f=n(18938),h=n.n(f),v=n(49870),l=n.n(v),d=n(31684),_=n.n(d),w=n(73916),x=n.n(w),k=n(94394),b=n.n(k),y=n(94506),g=n.n(y),m=n(42877),A=n.n(m),B=n(63375),E=n.n(B),O=n(87612),T=n.n(O),W=n(55378),j=n.n(W),K=(n(17),n(5086),n(54989),n(29979),n(14602),n(59581),n(38839)),P=n(56194),S=n(3744);function C(t,e){var n=e.host,r=e.type;return j()(T()(t,(function(t){return(!r||t.type===r)&&(!n||t.hostname==n)})),(function(t){return t["id"]}))}var D=(0,K.nY)("buckets",{state:function(){return{buckets:[]}},getters:{hosts:function(t){var e=this,n=E()(j()(t.buckets,(function(t){return t.hostname||t.data.hostname})));return n=A()(n,(function(t){return g()(j()(e.bucketsByHostname[t],(function(t){return t.last_updated})))}),["desc"]),n},devices:function(){return E()(j()(this.buckets,(function(t){return t.device_id||t.data.device_id})))},available:function(){var t=this;return function(e){var n=t.bucketsWindow(e).length>0&&t.bucketsAFK(e).length>0,r=t.bucketsAndroid(e).length>0;return{window:n,browser:n&&t.bucketsBrowser(e).length>0,editor:t.bucketsEditor(e).length>0,android:r,category:n||r,stopwatch:t.bucketsStopwatch(e).length>0}}},bucketsByType:function(){var t=this;return function(e,n,r){var u=C(t.buckets,{host:e,type:n});return r&&0==u.length&&(u=C(t.buckets,{host:"unknown",type:n})),u}},bucketsAFK:function(){var t=this;return function(e){return t.bucketsByType(e,"afkstatus")}},bucketsWindow:function(){var t=this;return function(e){return t.bucketsByType(e,"currentwindow").filter((function(t){return!t.startsWith("aw-watcher-android")}))}},bucketsAndroid:function(){var t=this;return function(e){return t.bucketsByType(e,"currentwindow").filter((function(t){return t.startsWith("aw-watcher-android")}))}},bucketsEditor:function(){var t=this;return function(e){return t.bucketsByType(e,"app.editor.activity",!0)}},bucketsBrowser:function(){var t=this;return function(e){return t.bucketsByType(e,"web.tab.current",!0)}},bucketsStopwatch:function(){var t=this;return function(e){return t.bucketsByType(e,"general.stopwatch",!0)}},getBucket:function(){var t=this;return function(e){return T()(t.buckets,(function(t){return t.id===e}))[0]}},bucketsByHostname:function(){return b()(this.buckets,"hostname")},bucketsByDevice:function(){var t=x()(b()(this.buckets,(function(t){return t.hostname||t.device_id})),(function(t){var e=E()(j()(t,(function(t){return t.hostname||t.data.hostname}))),n=E()(j()(t,(function(t){return t.data.device_id||t.hostname})));return{buckets:t,device_id:n[0],device_ids:n,hostname:e[0],hostnames:e,first_seen:_()(j()(t,(function(t){return t.first_seen}))),last_updated:g()(j()(t,(function(t){return t.last_updated})))}})),e=l()([h(),function(t){return A()(t,(function(t){return t[1].last_updated}),["desc"])},p()]);t=e(t);var n=(0,S.m)(),r=n.info&&n.info.hostname,u=Object.prototype.hasOwnProperty.call(t,r)?t[r]:null;return u&&(delete t[r],t=(0,i.A)((0,a.A)({},r,u),t)),t}},actions:{ensureLoaded:function(){var t=this;return(0,u.A)((0,r.A)().mark((function e(){return(0,r.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.buckets.length){e.next=3;break}return e.next=3,t.loadBuckets();case 3:case"end":return e.stop()}}),e)})))()},loadBuckets:function(){var t=this;return(0,u.A)((0,r.A)().mark((function e(){var n;return(0,r.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,P.KU)().getBuckets();case 2:n=e.sent,t.update_buckets(n);case 4:case"end":return e.stop()}}),e)})))()},getBucketWithEvents:function(t){var e=this;return(0,u.A)((0,r.A)().mark((function n(){var u,a,i,o,c;return(0,r.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return u=t.id,a=t.start,i=t.end,o=t.limit,n.next=3,e.ensureLoaded();case 3:return c=s()(e.getBucket(u)),n.next=6,(0,P.KU)().getEvents(c.id,{start:a,end:i,limit:o||-1});case 6:return c.events=n.sent,n.abrupt("return",c);case 8:case"end":return n.stop()}}),n)})))()},getBucketsWithEvents:function(t){var e=this;return(0,u.A)((0,r.A)().mark((function n(){var a,i,o;return(0,r.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.start,i=t.end,n.next=3,e.ensureLoaded();case 3:return n.next=5,Promise.all(j()(e.buckets,function(){var t=(0,u.A)((0,r.A)().mark((function t(n){return(0,r.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getBucketWithEvents({id:n.id,start:a,end:i});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 5:return o=n.sent,n.abrupt("return",A()(o,[function(t){return t.id}],["asc"]));case 7:case"end":return n.stop()}}),n)})))()},deleteBucket:function(t){var e=this;return(0,u.A)((0,r.A)().mark((function n(){var u;return(0,r.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return u=t.bucketId,console.log("Deleting bucket ".concat(u)),n.next=4,(0,P.KU)().deleteBucket(u);case 4:return n.next=6,e.loadBuckets();case 6:case"end":return n.stop()}}),n)})))()},update_buckets:function(t){this.buckets=A()(t,[function(t){return t.id}],["asc"]).map((function(t){return!t.last_updated&&t.metadata&&t.metadata.end&&(t.last_updated=t.metadata.end),!t.first_seen&&t.metadata&&t.metadata.start&&(t.first_seen=t.metadata.start),!t.first_seen&&t.created&&(t.first_seen=t.created),t}))}}})},91033:t=>{function e(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}t.exports=e},91372:(t,e,n)=>{var r=n(34932);function u(t,e){return r(e,(function(e){return[e,t[e]]}))}t.exports=u},94394:(t,e,n)=>{var r=n(43360),u=n(42e3),a=Object.prototype,i=a.hasOwnProperty,o=u((function(t,e,n){i.call(t,n)?t[n].push(e):r(t,n,[e])}));t.exports=o},94506:(t,e,n)=>{var r=n(93599),u=n(3335),a=n(83488);function i(t){return t&&t.length?r(t,a,u):void 0}t.exports=i},96131:(t,e,n)=>{var r=n(2523),u=n(85463),a=n(76959);function i(t,e,n){return e===e?a(t,e,n):r(t,u,n)}t.exports=i},97189:(t,e,n)=>{var r=n(37334),u=n(93243),a=n(83488),i=u?function(t,e){return u(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:a;t.exports=i}}]);
//# sourceMappingURL=296.9da5ded6.js.map